class TemplateFetcher{constructor(...e){const t=this;this.settings={action:"/fetch-template",fetch:!0,csrf:{name:void 0!==window.csrfTokenName?window.csrfTokenName:"X-CSRF-Token",token:void 0!==window.csrfTokenValue?window.csrfTokenValue:null},dev:!1},e.length&&e.forEach(function(e){switch(typeof e){case"boolean":t.settings.fetch=e;break;case"string":t.settings.action=e;break;case"object":t.settings=Object.assign({},t.settings,e)}}),this.settings.dev&&console.log(this.settings)}get fetcher(){return{ajaxMethod(e,t,s){$.ajax({type:"POST",dataType:"json",url:e.settings.action,data:t,headers:{[e.settings.csrf.name]:e.settings.csrf.token},success(t){!0===t.success?(s(t),e.settings.dev&&console.log("Success:",t)):console.error("Error:",t)},error(e){console.error("Template Error:",e.responseJSON.error)}})},fetchMethod(e,t,s){window.fetch(e.settings.action,{mode:"cors",method:"POST",headers:new Headers({"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"fetch",[e.settings.csrf.name]:e.settings.csrf.token}),body:JSON.stringify(t),credentials:"same-origin"}).then(t=>t.json().then(o=>t.ok?(e.settings.dev&&console.log("Success:",o),s(o),o):(console.error("Error:",o.error),Promise.reject({status:t.status,data:o})))).catch(e=>console.error("Error:",e))}}}template(e,t){void 0!==e&&void 0!==t&&(this.settings.fetch?this.fetcher.fetchMethod(this,e,t):this.fetcher.ajaxMethod(this,e,t))}}
